<!DOCTYPE html>
<html lang="en">
<head>
    <title>Display a map</title>
    <meta property="og:description" content="Initialize a map in an HTML element with MapLibre GL JS." />
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel='stylesheet' href='https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css' />
    <script src='https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js'></script>
    <script src='https://unpkg.com/@turf/turf@6/turf.min.js'></script>
    <style>
        body { margin: 0; padding: 0; }
        html, body, #map { height: 100%; }
    </style>
</head>
<body>
    <div id="map"></div>
    <script>
        const map = new maplibregl.Map({
            container: 'map', // container id
            style: 'https://tiles.stadiamaps.com/styles/stamen_toner_lite.json', // style URL
            center: [-0.13067, 51.5068], // starting position [lng, lat]
            zoom: 12
             // starting zoom
        });
        var popup = new maplibregl.Popup({closeOnClick: false})

        map.on('load', () =>{

            fetch('./data_files/uk_local_district_boundaries.json')
            .then(response => response.json())
            .then(response => {
                console.log(response);
                
                map.addSource("boroughs_shapes",{
                    type : "geojson",
                    data :  response             
                 })

                map.addLayer({
                    id : "boroughs_line_layer",
                    type : "line",
                    source : "boroughs_shapes",
                    paint : {
                        "line-opacity" : 0.5,
                        "line-color" : "#000000",
                        "line-width" : 2.5
                    }
                })
            })

            map.on('click', 'boroughs_line_layer', function(e){
                const borough_line_hover = map.queryRenderedFeatures(e.point, { layers : ['boroughs_line_layer']})
                console.log(borough_line_hover)
                popup.setLngLat(e.lngLat)[0].setHTML(
                    `${borough_line_hover[0].properties.name}`
                ).addTo(map)
                
            })
        })
    </script>
</body>




      